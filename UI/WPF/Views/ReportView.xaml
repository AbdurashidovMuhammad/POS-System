<UserControl x:Class="WPF.Views.ReportView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:WPF.ViewModels"
             mc:Ignorable="d"
             d:DataContext="{d:DesignInstance Type=vm:ReportViewModel}"
             d:DesignHeight="600" d:DesignWidth="900">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Date Filter -->
        <Border Grid.Row="0" Background="White" CornerRadius="12" Padding="25" Margin="0,0,0,20">
            <Border.Effect>
                <DropShadowEffect BlurRadius="20" ShadowDepth="2" Opacity="0.08" Direction="270"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Boshlanish:"
                           VerticalAlignment="Center"
                           FontSize="14"
                           Foreground="#666"
                           Margin="0,0,15,0"/>
                <DatePicker Grid.Column="1"
                            SelectedDate="{Binding StartDate}"
                            VerticalAlignment="Center"
                            Margin="0,0,30,0"/>

                <TextBlock Grid.Column="2"
                           Text="Tugash:"
                           VerticalAlignment="Center"
                           FontSize="14"
                           Foreground="#666"
                           Margin="0,0,15,0"/>
                <DatePicker Grid.Column="3"
                            SelectedDate="{Binding EndDate}"
                            VerticalAlignment="Center"
                            Margin="0,0,30,0"/>

                <Button Grid.Column="4"
                        Content="Hisobot olish"
                        Command="{Binding LoadReportCommand}"
                        Padding="30,14"
                        Background="#FF9800"
                        Foreground="White"
                        BorderThickness="0"
                        FontSize="14"
                        Cursor="Hand">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border x:Name="border"
                                    Background="{TemplateBinding Background}"
                                    CornerRadius="8"
                                    Padding="{TemplateBinding Padding}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="border" Property="Background" Value="#F57C00"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
            </Grid>
        </Border>

        <!-- Report Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Total Sales Card -->
            <Border Grid.Column="0" Background="White" CornerRadius="12" Margin="0,0,10,0">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="20" ShadowDepth="2" Opacity="0.08" Direction="270"/>
                </Border.Effect>
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="30">
                    <Border Width="80" Height="80" Background="#e8f5e9" CornerRadius="40" Margin="0,0,0,20">
                        <Path Data="M5,6H23V18H5V6M14,9A3,3 0 0,1 17,12A3,3 0 0,1 14,15A3,3 0 0,1 11,12A3,3 0 0,1 14,9M9,8A2,2 0 0,1 7,10V14A2,2 0 0,1 9,16H19A2,2 0 0,1 21,14V10A2,2 0 0,1 19,8H9M1,10H3V20H19V22H1V10Z"
                              Fill="#4CAF50"
                              Width="36" Height="36"
                              Stretch="Uniform"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock Text="Jami sotuvlar"
                               FontSize="16"
                               Foreground="#666"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="{Binding TotalSales, StringFormat={}{0:N0} sum}"
                               FontSize="36"
                               FontWeight="Bold"
                               Foreground="#2e7d32"
                               HorizontalAlignment="Center"
                               Margin="0,15,0,0"/>
                    <TextBlock Text="Tanlangan davr uchun"
                               FontSize="12"
                               Foreground="#999"
                               HorizontalAlignment="Center"
                               Margin="0,10,0,0"/>
                </StackPanel>
            </Border>

            <!-- Total Transactions Card -->
            <Border Grid.Column="1" Background="White" CornerRadius="12" Margin="10,0,0,0">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="20" ShadowDepth="2" Opacity="0.08" Direction="270"/>
                </Border.Effect>
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="30">
                    <Border Width="80" Height="80" Background="#e3f2fd" CornerRadius="40" Margin="0,0,0,20">
                        <Path Data="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M9,13V19H7V13H9M15,15V19H13V15H15M11,11V19H13V11H11Z"
                              Fill="#2196F3"
                              Width="36" Height="36"
                              Stretch="Uniform"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Center"/>
                    </Border>
                    <TextBlock Text="Jami operatsiyalar"
                               FontSize="16"
                               Foreground="#666"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="{Binding TotalTransactions, StringFormat={}{0} ta}"
                               FontSize="36"
                               FontWeight="Bold"
                               Foreground="#1565c0"
                               HorizontalAlignment="Center"
                               Margin="0,15,0,0"/>
                    <TextBlock Text="Amalga oshirilgan sotuvlar"
                               FontSize="12"
                               Foreground="#999"
                               HorizontalAlignment="Center"
                               Margin="0,10,0,0"/>
                </StackPanel>
            </Border>

            <!-- Loading Indicator -->
            <Border Grid.ColumnSpan="2"
                    Background="#E0FFFFFF"
                    CornerRadius="12"
                    Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}">
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <ProgressBar IsIndeterminate="True" Width="200" Height="4"/>
                    <TextBlock Text="Yuklanmoqda..."
                               Margin="0,15,0,0"
                               FontSize="14"
                               Foreground="#666"/>
                </StackPanel>
            </Border>

            <!-- Error Message -->
            <Border Grid.ColumnSpan="2"
                    Background="#FFEBEE"
                    Padding="20"
                    CornerRadius="8"
                    VerticalAlignment="Top"
                    HorizontalAlignment="Stretch"
                    Margin="10"
                    Visibility="{Binding ErrorMessage, Converter={StaticResource StringToVisibilityConverter}}">
                <TextBlock Text="{Binding ErrorMessage}" Foreground="#C62828"/>
            </Border>
        </Grid>
    </Grid>
</UserControl>
